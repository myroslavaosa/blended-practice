{"version":3,"file":"gallery.js","sources":["../src/js/Unsplash-api.js","../src/js/createGalleryCard.js","../src/js/gallery.js"],"sourcesContent":["import axios from \"axios\"\n\nexport class UnsplashAPI {\n    #BASE_URL = 'https://api.unsplash.com/search/photos'\n    #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58'\n    #query = '';\n\n    async getPopularPhotos(page) {\n        const url = `${this.#BASE_URL}?page=${page}&per_page=12&query=popular&orientation=portrait&client_id=${this.#API_KEY}`\n\n        try {\n            const response = await axios(url);\n            return response.data;\n        } catch (error) {\n            console.log(error) \n        }\n    }\n\n    async getPhotosByQuery(page) {\n        const url = `${this.#BASE_URL}?page=${page}&per_page=12&query=${this.#query}&orientation=portrait&client_id=${this.#API_KEY}`\n\n        try {\n            const response = await axios(url);\n            return response.data;\n        } catch (error) {\n            console.log(error) \n        }\n    }\n\n    set query(newQuery){\n        this.#query = newQuery;\n    }\n    \n}","export function createGalleryCard(images) {\n  return images\n    .map(\n      image => `<li class=\"gallery__item\">\n        <img class=\"gallery-img\" alt=\"${image.alt_description}\" src=\"${image.urls.small}\" />\n      </li>`\n    )\n    .join('');\n}\n","// Створи додаток для пошуку зображень по ключовому слову.\n// При завантаженні сторінки має відбуватись запит за популярними зображеннями (ключове слово - popular),\n// а при введенні якогось слова в форму - пошук відбувається по цьому ключовому слову і сторінка перемальовується.\n// Використовуй UnsplashAPI (https://unsplash.com/documentation) для запитів. Створи клас UnsplashAPI для інкапсуляції\n// логіки запитів в одному місті в окремому файлі.\n// Створи окремо файл createGalleryCard.js, в якому буде функція, що відповідатиме за створення розмітки.\n// В головному файлі gallery.js має бути вся логіка роботи застосунку.\n// Підключи пагінацію, використовуючи бібліотеку tui-pagination, щоб можна було робити запит за різними сторінками.\n// Додай слухача на форму, щоб робити новий запит по ключовому слову (додавши відповідний метод класу UnsplashAPI).\n// Додай лоадер під час завантаження даних з бекенда.\n// Не забудь про відповідні перевірки і сповіщення при роботі з запитами і з формою.\n\nimport iziToast from 'izitoast';\nimport { UnsplashAPI } from './Unsplash-api';\nimport { createGalleryCard } from './createGalleryCard';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('[name=\"query\"]');\nconst loader = document.querySelector(\".loader\");\n\nconst container = document.getElementById('tui-pagination-container');\nconst pagination = new Pagination(container, {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n});\n\nconst page = pagination.getCurrentPage();\n\nconst api = new UnsplashAPI();\napi.getPopularPhotos(page).then(response => {\n  const markup = createGalleryCard(response.results);\n  pagination.reset(response.total);\n  gallery.innerHTML = markup;\n  console.log(response);\n});\n\nfunction getPopular(event) {\n  const currentPage = event.page;\n  api.getPopularPhotos(currentPage).then(response => {\n    const markup = createGalleryCard(response.results);\n    gallery.innerHTML = markup;\n    console.log(response);\n  });\n}\nfunction getByQuery(e) {\n  const currentPage = e.page;\n  loader.classList.remove(\"is-hidden\");\n  api.getPhotosByQuery(currentPage).then(response => {\n    const markup = createGalleryCard(response.results);\n    gallery.innerHTML = markup;\n    console.log(response);\n  })\n    .catch(error => {\n      console.log(error);\n      iziToast.error({ message: \"Something went wrong\" });\n    })\n    .finally(() => loader.classList.add(\"is-hidden\"))\n}\n\n\npagination.on('afterMove', getPopular);\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const searchQuery = input.value.trim();\n  if (searchQuery === '') {\n    iziToast.info({\n      message: 'Enter something for search',\n    })\n    return;\n  }\n\n  api.query = searchQuery;\n  pagination.off('afterMove', getPopular);\n  pagination.off('afterMove', getByQuery);\n  loader.classList.remove(\"is-hidden\");\n  try {\n    const data = await api.getPhotosByQuery(page);\n    if (data.results.length === 0) {\n      iziToast.warning({\n        message: 'Sorry, there are no images matching your search query. Please try again!'\n      })\n      return;\n    }\n    pagination.on('afterMove', getByQuery);\n    const markup = createGalleryCard(data.results);\n    gallery.innerHTML = markup;\n\n    pagination.reset(data.total);\n\n  } catch (error) {\n    console.log(error);\n  }\n  finally { loader.classList.add(\"is-hidden\") }\n\n})\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","axios","error","newQuery","__privateSet","createGalleryCard","images","image","gallery","form","input","loader","container","pagination","Pagination","api","response","markup","getPopular","event","currentPage","getByQuery","e","iziToast","searchQuery","data"],"mappings":"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"}